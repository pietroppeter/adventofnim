<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>2020\day15.html</title>
  <!-- https://css-tricks.com/emojis-as-favicons/ changed font-size to 80 to fit whale-->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>🐳</text></svg>">
  <meta content="text/html; charset=utf-8" http-equiv="content-type">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link rel='stylesheet' href='https://unpkg.com/normalize.css/'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.min.css">
  <link rel='stylesheet' href='../static/androidstudio.css'>
  <script src="../static/highlight.nim.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
<style>
a {
    text-decoration: none;
    color: #009900;
}

a:hover {
    color: #99ff99;
}

em {
    color: #ffffff;
    font-style: normal;
    text-shadow: 0 0 5px #ffffff;
}

em.star {
  font-style: normal;
  color: #ffff66;
  text-shadow: 0 0 5px #ffff66;
}
</style>
</head>
<body>
<header><nav><em class="star"><a href="https://pietroppeter.github.io/adventofnim/index.html">🎄👑 adventofnim</a></em></header>
<hr><main>
<h2>2020, Day 15: Rambunctious Recitation 🔥 🎭</h2>
<p>This Advent of code seems to be about presents:</p>
<ul>
<li>First present today: <em>rambunctious</em> or &quot;full of energy and difficult to control&quot;.</li>
<li>Second present: <a href="http://oeis.org/A181391">Van Eck's sequence</a>,
see also the <a href="https://www.numberphile.com/videos/van-eck-sequence">Numberphile episode</a></li>
<li>Third present: part 2 is just simple brute force.</li>
<li>Is the fourth present going to be someone from Advent of Code discovering something
new about this interesting sequence?</li>
</ul>
<p>Nothing much to say about the implementation. I had to debug a bit in order to get
part 1 straight. Part 2 took around 5 seconds on my machine.</p>
<pre><code class="nim">import
  tables, times

template upd() =
  ## extracted since it is repeated twice
  if last notin spoken:
    spoken[last] = turn
  elif last notin spokenAgain:
    spokenAgain[last] = turn
  else:
    spoken[last] = spokenAgain[last]
    spokenAgain[last] = turn

var nTurns = 2020
proc play(numbers: openarray[int]): int =
  var
    spoken = initTable[int, int]()
    spokenAgain = initTable[int, int]()
    last: int
  for turn in 1 .. nTurns:
    if turn <= numbers.len:
      last = numbers[turn - 1]
      spoken[last] = turn
    elif last in spoken and last notIn spokenAgain:
      last = 0
      upd
    elif last in spoken and last in spokenAgain:
      last = spokenAgain[last] - spoken[last]
      upd
    else:
      return -1
  last

echo play [0, 3, 6]          ## 436
echo play [1, 3, 2]          ## 1
echo play [2, 1, 3]          ## 10
echo play [1, 2, 3]          ## 27
echo play [2, 3, 1]          ## 78
echo play [3, 2, 1]          ## 438
echo play [3, 1, 2]          ## 1836
echo "part 1: ", play [15, 5, 1, 4, 7, 0] ## 1259</code></pre>
<pre><samp>436
1
10
27
78
438
1836
part 1: 1259</samp></pre>
<p>That's the right answer! You are <em class="star">one gold star</em> closer to saving your vacation.</p>
<pre><code class="nim">nTurns = 30000000
echo play [0, 3, 6]          ## 175594
echo play [1, 3, 2]          ## 2578
echo play [2, 1, 3]          ## 3544142
echo play [1, 2, 3]          ## 261214
echo play [2, 3, 1]          ## 6895259
echo play [3, 2, 1]          ## 18
echo play [3, 1, 2]          ## 362
let start = now()
echo "part 2: ", play [15, 5, 1, 4, 7, 0] ## 689
echo "part 2 completed in ", now() - start</code></pre>
<pre><samp>175594
2578
3544142
261214
6895259
18
362
part 2: 689
part 2 completed in 4 seconds, 906 milliseconds, and 231 microseconds</samp></pre>
<p>That's the right answer! You are <em class="star">one gold star</em> closer to saving your vacation.</p>

</main>
<hr>
<small>
<p>github repo for all my solutions: 🎄👑<a href="https://github.com/pietroppeter/adventofnim">adventofnim</a>;</p>
<p>html output powered by 🐳<a href="https://github.com/pietroppeter/nimib">nimib</a>.</p>
</small>
</body>
</html>